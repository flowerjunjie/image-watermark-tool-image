<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å›¾ç‰‡æ°´å°å·¥å…· - ç‹¬ç«‹ç‰ˆ</title>
  <!-- å¼•å…¥CSS -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="icon" href="public/libs/favicon.ico" type="image/x-icon">
  
  <!-- é”™è¯¯å¤„ç†å’Œè°ƒè¯• -->
  <script>
    // å…¨å±€é”™è¯¯å¤„ç†
    window.onerror = function(message, source, lineno, colno, error) {
      console.error('å…¨å±€é”™è¯¯:', message, 'at', source, ':', lineno, ':', colno);
      const errorContainer = document.getElementById('error-container');
      if (errorContainer) {
        errorContainer.innerHTML += `<p>åŠ è½½é”™è¯¯: ${message}</p>`;
        errorContainer.classList.add('show');
      }
      return false;
    };
    
    // åº“åŠ è½½çŠ¶æ€
    window.libraryStatus = {
      jszip: false,
      gifjs: false,
      libgifjs: false
    };
    
    // åº“åŠ è½½å‡½æ•°
    function loadScript(localUrl, cdnUrl, id) {
      return new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = localUrl;
        script.async = true;
        script.id = id;
        
        script.onload = function() {
          console.log(`æˆåŠŸåŠ è½½åº“: ${id}`);
          window.libraryStatus[id] = true;
          resolve();
        };
        
        script.onerror = function() {
          console.warn(`ä» ${localUrl} åŠ è½½åº“å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨URL: ${cdnUrl}`);
          if (cdnUrl) {
            const backupScript = document.createElement('script');
            backupScript.src = cdnUrl;
            backupScript.async = true;
            backupScript.id = id + '-backup';
            
            backupScript.onload = function() {
              console.log(`æˆåŠŸä»å¤‡ç”¨URLåŠ è½½åº“: ${id}`);
              window.libraryStatus[id] = true;
              resolve();
            };
            
            backupScript.onerror = function() {
              console.error(`ä»å¤‡ç”¨URLåŠ è½½åº“å¤±è´¥: ${id}`);
              reject(new Error(`æ— æ³•åŠ è½½åº“: ${id}`));
            };
            
            document.head.appendChild(backupScript);
          } else {
            reject(new Error(`æ— æ³•åŠ è½½åº“: ${id}`));
          }
        };
        
        document.head.appendChild(script);
      });
    }
  </script>
  
  <!-- åº“åŠ è½½ -->
  <script>
    // åŠ è½½æ‰€æœ‰å¿…è¦çš„åº“
    Promise.all([
      loadScript('public/libs/jszip.min.js', 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js', 'jszip'),
      loadScript('public/libs/gif.min.js', 'https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.min.js', 'gifjs'),
      loadScript('public/libs/libgif.js', 'https://cdn.jsdelivr.net/gh/buzzfeed/libgif-js@master/libgif.js', 'libgifjs')
    ]).then(() => {
      console.log('æ‰€æœ‰åº“åŠ è½½æˆåŠŸ');
    }).catch(error => {
      console.error('åº“åŠ è½½å¤±è´¥:', error);
      const errorContainer = document.getElementById('error-container');
      if (errorContainer) {
        errorContainer.innerHTML += `<p>åº“åŠ è½½å¤±è´¥: ${error.message}</p>`;
        errorContainer.classList.add('show');
      }
    });
    
    // åˆ›å»ºä¸€ä¸ªå…¨å±€å®¹å™¨ç”¨äºSuperGif
    window.onload = function() {
      try {
        const gifContainer = document.createElement('div');
        gifContainer.id = 'gif-container';
        gifContainer.style.position = 'absolute';
        gifContainer.style.left = '-9999px';
        gifContainer.style.top = '-9999px';
        document.body.appendChild(gifContainer);
        console.log('GIFå®¹å™¨åˆ›å»ºæˆåŠŸ');
      } catch (error) {
        console.error('åˆ›å»ºGIFå®¹å™¨å¤±è´¥:', error);
      }
    };
  </script>
</head>
<body>
  <header>
    <h1>å›¾ç‰‡æ°´å°å·¥å…·</h1>
    <div style="display: flex; align-items: center; gap: 10px;">
      <button class="help-button" id="help-button" title="æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£">?</button>
      <span class="version">v1.0.0 (ç‹¬ç«‹ç‰ˆ)</span>
    </div>
  </header>
  
  <main>
    <div class="sidebar">
      <div id="error-container" class="error-container"></div>
      
      <div class="upload-area" id="upload-area">
        <p>ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œ</p>
        <p style="font-size: 12px; margin: 5px 0;">æ”¯æŒæ‰¹é‡ä¸Šä¼ å¤šå¼ å›¾ç‰‡æˆ–ä¸Šä¼ æ–‡ä»¶å¤¹</p>
        <p style="font-size: 12px; margin: 5px 0; color: #1976d2;">ç°åœ¨æ”¯æŒGIFåŠ¨å›¾å¤„ç†ï¼</p>
        <input type="file" id="file-input" accept="image/*" style="display: none;" multiple>
      </div>
      
      <div class="form-group">
        <div class="batch-buttons">
          <button class="button" id="upload-files-btn">ä¸Šä¼ å›¾ç‰‡</button>
          <button class="button" id="upload-folder-btn">ä¸Šä¼ æ–‡ä»¶å¤¹</button>
        </div>
      </div>
      
      <!-- å°†æ–‡ä»¶å¤¹è¾“å…¥æ¡†æ”¾åœ¨ä¸Šä¼ åŒºåŸŸå¤–éƒ¨ï¼Œé¿å…äº‹ä»¶å†’æ³¡é—®é¢˜ -->
      <input type="file" id="folder-input" style="display: none;" webkitdirectory directory multiple>
      
      <div class="help-card">
        <h3>ä½¿ç”¨å¸®åŠ©</h3>
        <ul>
          <li><span class="help-icon">ğŸ“¤</span> <strong>ä¸Šä¼ å›¾ç‰‡</strong>ï¼šå¯å•å¼ æˆ–æ‰¹é‡ä¸Šä¼ </li>
          <li><span class="help-icon">ğŸ“</span> <strong>ä¸Šä¼ æ–‡ä»¶å¤¹</strong>ï¼šä¿ç•™ç›®å½•ç»“æ„</li>
          <li><span class="help-icon">ğŸ–Œï¸</span> <strong>æ°´å°ç±»å‹</strong>ï¼šæ”¯æŒæ–‡å­—ã€å¹³é“ºå’Œå›¾ç‰‡æ°´å°</li>
          <li><span class="help-icon">âš™ï¸</span> <strong>æ‹–æ‹½å®šä½</strong>ï¼šå¯ç›´æ¥æ‹–åŠ¨æ°´å°è°ƒæ•´ä½ç½®</li>
          <li><span class="help-icon">ğŸ’¾</span> <strong>æ‰¹é‡å¤„ç†</strong>ï¼šä¸€æ¬¡å¤„ç†å¤šå¼ å›¾ç‰‡</li>
          <li><span class="help-icon">ğŸ“¦</span> <strong>æ‰¹é‡ä¸‹è½½</strong>ï¼šå°†å¤„ç†åçš„å›¾ç‰‡æ‰“åŒ…ä¸‹è½½</li>
          <li><span class="help-icon">ğŸï¸</span> <strong>GIFæ”¯æŒ</strong>ï¼šæ”¯æŒå¤„ç†GIFåŠ¨å›¾</li>
        </ul>
      </div>
      
      <!-- GIFå¤„ç†é€‰é¡¹ -->
      <div class="form-group" id="gif-options">
        <label for="gif-quality">GIFè´¨é‡ <span class="tooltip-icon" title="è°ƒæ•´GIFçš„è´¨é‡ï¼Œå€¼è¶Šä½æ–‡ä»¶è¶Šå°ï¼Œä½†è´¨é‡è¶Šå·®">?</span></label>
        <div class="range-container">
          <input type="range" id="gif-quality" min="1" max="20" value="10">
          <span id="gif-quality-value">10</span>
        </div>
        <div class="gif-progress-container" id="gif-progress-container" style="display: none;">
          <div class="gif-progress-bar" id="gif-progress-bar"></div>
        </div>
      </div>
      
      <div class="watermark-options">
        <div class="form-group">
          <label for="watermark-type">æ°´å°ç±»å‹ <span class="tooltip-icon" title="é€‰æ‹©ä¸åŒç±»å‹çš„æ°´å°ï¼šæ–‡å­—ã€å¹³é“ºæˆ–å›¾ç‰‡">?</span></label>
          <select id="watermark-type">
            <option value="text">æ–‡å­—æ°´å°</option>
            <option value="tiled">å¹³é“ºæ°´å°</option>
            <option value="image">å›¾ç‰‡æ°´å°</option>
          </select>
        </div>
        
        <div class="form-group" id="tiled-options" style="display: none;">
          <label for="tile-spacing">å¹³é“ºé—´è·</label>
          <div class="range-container">
            <input type="range" id="tile-spacing" min="50" max="300" value="150">
            <span id="tile-spacing-value">150px</span>
          </div>
        </div>
        
        <div class="form-group" id="text-options">
          <label for="watermark-text">æ°´å°æ–‡å­—</label>
          <input type="text" id="watermark-text" value="ä»…ä¾›éªŒè¯ä½¿ç”¨">
        </div>
        
        <div class="form-group" id="image-options" style="display: none;">
          <label for="watermark-image">é€‰æ‹©æ°´å°å›¾ç‰‡</label>
          <div class="upload-area" id="watermark-image-area">
            <p>ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡ä½œä¸ºæ°´å°</p>
            <input type="file" id="watermark-image-input" accept="image/*" style="display: none;">
          </div>
          <div id="watermark-image-preview" style="display: none; margin-top: 10px; text-align: center;">
            <img id="watermark-image-thumbnail" style="max-width: 100%; max-height: 100px; border: 1px solid #ddd;">
            <button class="button" id="remove-watermark-image" style="margin-top: 5px; background-color: #f44336;">ç§»é™¤æ°´å°å›¾ç‰‡</button>
          </div>
          <div class="form-group">
            <label for="watermark-image-size">æ°´å°å›¾ç‰‡å¤§å°</label>
            <div class="range-container">
              <input type="range" id="watermark-image-size" min="10" max="100" value="40">
              <span id="watermark-image-size-value">40%</span>
            </div>
          </div>
        </div>
        
        <!-- é€šç”¨é€‰é¡¹ -->
        <div class="form-group">
          <label for="font-size">å­—ä½“å¤§å° <span class="tooltip-icon" title="è°ƒæ•´æ°´å°æ–‡å­—çš„å¤§å°">?</span></label>
          <div class="range-container">
            <input type="range" id="font-size" min="10" max="100" value="36">
            <span id="font-size-value">36</span>
            <div class="number-input-container">
              <button class="number-btn" id="font-size-decrease">-</button>
              <input type="number" id="font-size-input" min="10" max="100" value="36" class="number-input">
              <button class="number-btn" id="font-size-increase">+</button>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="opacity">é€æ˜åº¦ <span class="tooltip-icon" title="è°ƒæ•´æ°´å°çš„é€æ˜åº¦ï¼Œå€¼è¶Šå°è¶Šé€æ˜">?</span></label>
          <div class="range-container">
            <input type="range" id="opacity" min="0" max="100" value="50">
            <span id="opacity-value">50%</span>
            <div class="number-input-container">
              <button class="number-btn" id="opacity-decrease">-</button>
              <input type="number" id="opacity-input" min="0" max="100" value="50" class="number-input">
              <button class="number-btn" id="opacity-increase">+</button>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="rotation">æ—‹è½¬è§’åº¦ <span class="tooltip-icon" title="è°ƒæ•´æ°´å°çš„å€¾æ–œè§’åº¦">?</span></label>
          <div class="range-container">
            <input type="range" id="rotation" min="-180" max="180" value="0">
            <span id="rotation-value">0Â°</span>
            <div class="number-input-container">
              <button class="number-btn" id="rotation-decrease">-</button>
              <input type="number" id="rotation-input" min="-180" max="180" value="0" class="number-input">
              <button class="number-btn" id="rotation-increase">+</button>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="color">é¢œè‰² <span class="tooltip-icon" title="é€‰æ‹©æ°´å°çš„é¢œè‰²">?</span></label>
          <input type="color" id="color" value="#ff0000">
        </div>
        
        <!-- å›¾ç‰‡è¾“å‡ºé€‰é¡¹ -->
        <div class="form-group">
          <label for="image-quality">å›¾ç‰‡è´¨é‡ <span class="tooltip-icon" title="è°ƒæ•´è¾“å‡ºå›¾ç‰‡çš„è´¨é‡ï¼Œå€¼è¶Šé«˜è´¨é‡è¶Šå¥½ï¼Œæ–‡ä»¶è¶Šå¤§">?</span></label>
          <div class="range-container">
            <input type="range" id="image-quality" min="10" max="100" value="92">
            <span id="image-quality-value">92%</span>
          </div>
        </div>
        
        <!-- æš‚æ—¶æ³¨é‡Šæ‰è¾“å‡ºæ ¼å¼é€‰æ‹©
        <div class="form-group">
          <label for="image-format">è¾“å‡ºæ ¼å¼ <span class="tooltip-icon" title="é€‰æ‹©è¾“å‡ºå›¾ç‰‡çš„æ ¼å¼">?</span></label>
          <select id="image-format">
            <option value="image/jpeg">JPEG (æ¨è)</option>
            <option value="image/png">PNG (æ— æŸ)</option>
            <option value="image/webp">WebP (é«˜å‹ç¼©ç‡)</option>
          </select>
        </div>
        -->
        
        <p class="help-text">æç¤ºï¼šå¯ä»¥ç›´æ¥æ‹–åŠ¨æ°´å°è°ƒæ•´ä½ç½®ï¼Œé¼ æ ‡æ»šè½®è°ƒæ•´å¤§å°</p>
        
        <!-- æ°´å°å®šä½å’Œç¼©æ”¾æ§åˆ¶ -->
        <div class="control-group">
          <h3>æ°´å°ä½ç½®</h3>
          <div class="position-controls">
            <div class="radio-group">
              <label><input type="radio" name="position" value="custom" checked> <span>è‡ªå®šä¹‰ä½ç½®</span></label>
              <label><input type="radio" name="position" value="top-left"> <span>å·¦ä¸Šè§’</span></label>
              <label><input type="radio" name="position" value="top-right"> <span>å³ä¸Šè§’</span></label>
              <label><input type="radio" name="position" value="bottom-left"> <span>å·¦ä¸‹è§’</span></label>
              <label><input type="radio" name="position" value="bottom-right"> <span>å³ä¸‹è§’</span></label>
              <label><input type="radio" name="position" value="center"> <span>å±…ä¸­</span></label>
              <label><input type="radio" name="position" value="tile"> <span>å¹³é“º</span></label>
            </div>
            
            <div id="margin-controls">
              <div class="slider-control">
                <label>æ°´å¹³è¾¹è· <span class="tooltip-icon" title="æ°´å°è·ç¦»è¾¹ç¼˜çš„æ°´å¹³è·ç¦»">?</span></label>
                <input type="range" id="margin-x-slider" min="0" max="100" value="20">
                <div class="slider-value">
                  <input type="number" id="margin-x-value" min="0" max="100" value="20">
                  <span>px</span>
                </div>
              </div>
              
              <div class="slider-control">
                <label>å‚ç›´è¾¹è· <span class="tooltip-icon" title="æ°´å°è·ç¦»è¾¹ç¼˜çš„å‚ç›´è·ç¦»">?</span></label>
                <input type="range" id="margin-y-slider" min="0" max="100" value="20">
                <div class="slider-value">
                  <input type="number" id="margin-y-value" min="0" max="100" value="20">
                  <span>px</span>
                </div>
              </div>
            </div>
            
            <div id="tile-controls" style="display: none;">
              <div class="slider-control">
                <label>å¹³é“ºé—´è· <span class="tooltip-icon" title="æ°´å°ä¹‹é—´çš„é—´è·">?</span></label>
                <input type="range" id="tile-spacing-slider" min="50" max="300" value="150">
                <div class="slider-value">
                  <input type="number" id="tile-spacing-value" min="50" max="300" value="150">
                  <span>px</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="control-group">
          <h3>æ°´å°ç¼©æ”¾</h3>
          <div class="scale-controls">
            <div class="radio-group">
              <label><input type="radio" name="scale-mode" value="fixed" checked> <span>å›ºå®šå¤§å°</span></label>
              <label><input type="radio" name="scale-mode" value="relative"> <span>ç›¸å¯¹å›¾ç‰‡å¤§å°</span></label>
            </div>
            
            <div id="relative-scale-controls" style="display: none;">
              <div class="slider-control">
                <label>ç¼©æ”¾æ¯”ä¾‹ <span class="tooltip-icon" title="æ°´å°ç›¸å¯¹äºå›¾ç‰‡å¤§å°çš„æ¯”ä¾‹">?</span></label>
                <input type="range" id="scale-ratio-slider" min="5" max="50" value="20">
                <div class="slider-value">
                  <input type="number" id="scale-ratio-value" min="5" max="50" value="20">
                  <span>%</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="batch-buttons">
          <button class="button" id="download-btn">ä¸‹è½½å•å¼ å›¾ç‰‡</button>
          <button class="button" id="batch-download-btn">æ‰¹é‡ä¸‹è½½(ZIP)</button>
        </div>
        
        <!-- æ’¤é”€/é‡åšæŒ‰é’® -->
        <div class="undo-redo-buttons">
          <button class="icon-button" id="undo-btn" title="æ’¤é”€"><span class="icon">â†©</span></button>
          <button class="icon-button" id="redo-btn" title="é‡åš"><span class="icon">â†ª</span></button>
        </div>
      </div>
    </div>
    
    <div class="preview-area">
      <!-- æ·»åŠ èƒŒæ™¯è‰²åˆ‡æ¢æ§ä»¶ -->
      <div class="bg-color-controls">
        <div class="bg-color-button bg-white active" data-color="#ffffff" title="ç™½è‰²èƒŒæ™¯"></div>
        <div class="bg-color-button bg-light-gray" data-color="#f5f5f5" title="æµ…ç°èƒŒæ™¯"></div>
        <div class="bg-color-button bg-light-blue" data-color="#e6f7ff" title="æµ…è“èƒŒæ™¯"></div>
        <div class="bg-color-button bg-light-green" data-color="#e6ffed" title="æµ…ç»¿èƒŒæ™¯"></div>
        <div class="bg-color-button bg-light-yellow" data-color="#fffbe6" title="æµ…é»„èƒŒæ™¯"></div>
      </div>
      
      <div class="preview-container" id="preview-container">
        <div id="no-image-message" style="text-align: center; padding: 20px;">è¯·ä¸Šä¼ å›¾ç‰‡è¿›è¡Œé¢„è§ˆ</div>
        <div id="gif-badge" class="gif-badge" style="display: none;">GIF</div>
        <img id="preview-image" class="preview-image" style="display: none;">
        <canvas id="preview-canvas" class="preview-image" style="display: none;"></canvas>
        <div id="watermark-container" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; pointer-events: auto; z-index: 9999;"></div>
      </div>
      
      <div class="thumbnails-container" id="thumbnails-container" style="display: none;"></div>
    </div>
  </main>
  
  <!-- è¿›åº¦æ¨¡æ€æ¡† -->
  <div id="processing-modal" class="modal">
    <div class="modal-content">
      <h2 class="modal-title">å¤„ç†ä¸­...</h2>
      <p id="processing-status">æ­£åœ¨å¤„ç†å›¾ç‰‡...</p>
      <div class="progress-container" style="display: block;">
        <div id="modal-progress-bar" class="progress-bar" style="width: 0%">0%</div>
      </div>
    </div>
  </div>
  
  <!-- å¸®åŠ©æ–‡æ¡£æ¨¡æ€æ¡† -->
  <div id="help-modal" class="modal">
    <div class="help-modal-content" id="help-modal-content">
      <!-- å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
    </div>
    <button class="close-button">&times;</button>
  </div>
  
  <!-- çŠ¶æ€æ¶ˆæ¯ -->
  <div id="status-message" class="status-message"></div>
  
  <!-- å¤„ç†ä¸­å¼¹çª— -->
  <div id="processing-popup" class="modal" style="display: none;">
    <div class="modal-content">
      <h3>å¤„ç†ä¸­...</h3>
      <div id="processing-status" class="processing-status">æ­£åœ¨å‡†å¤‡å›¾ç‰‡...</div>
      <div class="progress-container">
        <div id="processing-progress-bar" class="progress-bar"></div>
      </div>
      <div id="processing-details" class="processing-details"></div>
      
      <!-- æ·»åŠ å¤„ç†ç»Ÿè®¡ä¿¡æ¯åŒºåŸŸ -->
      <div class="processing-stats">
        <div class="stats-row">
          <div class="stats-item" id="processing-time">
            <div class="stats-label">å·²ç”¨æ—¶é—´</div>
            <div class="stats-value">0ç§’</div>
          </div>
          <div class="stats-item" id="processing-remaining">
            <div class="stats-label">é¢„è®¡å‰©ä½™</div>
            <div class="stats-value">è®¡ç®—ä¸­...</div>
          </div>
        </div>
        <div class="stats-row">
          <div class="stats-item" id="processing-speed">
            <div class="stats-label">å¤„ç†é€Ÿåº¦</div>
            <div class="stats-value">0å¼ /ç§’</div>
          </div>
          <div class="stats-item" id="processing-count">
            <div class="stats-label">å¤„ç†è¿›åº¦</div>
            <div class="stats-value">0/0</div>
          </div>
        </div>
      </div>
      
      <!-- æ·»åŠ å–æ¶ˆæŒ‰é’® -->
      <div class="processing-actions">
        <button id="processing-minimize-btn" class="button secondary">æœ€å°åŒ–</button>
        <!-- å–æ¶ˆåŠŸèƒ½æš‚æœªå®ç°ï¼Œå…ˆæ³¨é‡Šæ‰ -->
        <!-- <button id="processing-cancel-btn" class="button danger">å–æ¶ˆ</button> -->
      </div>
    </div>
  </div>
  
  <!-- å¼•å…¥JavaScriptæ¨¡å— -->
  <script type="module" src="js/main.js"></script>
  
  <!-- æ¨¡å—åŠ è½½å¤±è´¥æ—¶çš„å¤‡é€‰æ–¹æ¡ˆ -->
  <script>
    // æ£€æµ‹æ¨¡å—åŠ è½½æ˜¯å¦å¤±è´¥
    setTimeout(() => {
      if (!window.watermarkInitialized) {
        console.log('æ¨¡å—åŠ è½½å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨ä¼ ç»Ÿè„šæœ¬åŠ è½½');
        const errorMsg = document.getElementById('error-container');
        if (errorMsg) {
          errorMsg.innerHTML = '<div class="error-title">æ¨¡å—åŠ è½½å¤±è´¥</div>' +
            '<p>å¯èƒ½çš„åŸå› ï¼š</p>' +
            '<ul>' +
            '<li>æµè§ˆå™¨ä¸æ”¯æŒESæ¨¡å—</li>' +
            '<li>å¤–éƒ¨åº“åŠ è½½å¤±è´¥</li>' +
            '<li>JavaScripté”™è¯¯é˜»æ­¢äº†åˆå§‹åŒ–</li>' +
            '</ul>' +
            '<p>è¯·å°è¯•ä»¥ä¸‹è§£å†³æ–¹æ³•ï¼š</p>' +
            '<ol>' +
            '<li>ä½¿ç”¨å‘½ä»¤è¡Œè¿›å…¥é¡¹ç›®ç›®å½•</li>' +
            '<li>è¿è¡Œ <code>npx http-server .</code> å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨</li>' +
            '<li>åœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://localhost:8080/standalone-app-new.html">http://localhost:8080/standalone-app-new.html</a></li>' +
            '<li>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°(F12)æŸ¥çœ‹å…·ä½“é”™è¯¯</li>' +
            '</ol>';
          errorMsg.classList.add('show');
          
          // æ˜¾ç¤ºåº“åŠ è½½çŠ¶æ€
          const libraryStatus = window.libraryStatus || {};
          const statusHTML = '<div class="library-status">' +
            '<p>åº“åŠ è½½çŠ¶æ€ï¼š</p>' +
            '<ul>' +
            `<li>JSZip: ${libraryStatus.jszip ? 'âœ…' : 'âŒ'}</li>` +
            `<li>GIF.js: ${libraryStatus.gifjs ? 'âœ…' : 'âŒ'}</li>` +
            `<li>libgif.js: ${libraryStatus.libgifjs ? 'âœ…' : 'âŒ'}</li>` +
            '</ul>' +
            '</div>';
          errorMsg.innerHTML += statusHTML;
        }
      }
    }, 3000); // å¢åŠ è¶…æ—¶æ—¶é—´åˆ°3ç§’
  </script>
</body>
</html>  