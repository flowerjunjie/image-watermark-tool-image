<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>图片水印工具</title>
  <link rel="stylesheet" href="css/styles.css">
  <script type="module" src="js/app.js"></script>
</head>
<body>
  <div class="app-container">
    <!-- 顶部导航 -->
    <header class="app-header">
      <div class="logo">
        <img src="assets/logo.png" alt="图片水印工具">
        <h1>图片水印工具</h1>
      </div>
      <div class="header-controls">
        <button id="undo-btn" class="icon-button" title="撤销">
          <i class="icon icon-undo"></i>
        </button>
        <button id="redo-btn" class="icon-button" title="重做">
          <i class="icon icon-redo"></i>
        </button>
        <div class="theme-toggle">
          <input type="checkbox" id="dark-mode-toggle" class="toggle-input">
          <label for="dark-mode-toggle" class="toggle-label">
            <i class="icon icon-sun"></i>
            <i class="icon icon-moon"></i>
          </label>
        </div>
      </div>
    </header>
    
    <!-- 主内容区 -->
    <main class="app-main">
      <!-- 左侧面板 - 上传区域 -->
      <section class="upload-panel panel">
        <h2>上传图片</h2>
        <div id="upload-area" class="upload-area">
          <div class="upload-placeholder">
            <i class="icon icon-upload"></i>
            <p>拖放图片或文件夹到此处</p>
            <p class="small">或</p>
            <div class="upload-buttons">
              <button id="upload-files-btn" class="button primary">选择文件</button>
              <button id="upload-folder-btn" class="button secondary">选择文件夹</button>
            </div>
          </div>
          <input type="file" id="file-input" multiple accept="image/*" style="display: none;">
          <input type="file" id="folder-input" webkitdirectory directory multiple style="display: none;">
        </div>
        
        <!-- 缩略图区域 -->
        <div id="thumbnails-container" class="thumbnails-container"></div>
      </section>
      
      <!-- 中间区域 - 预览 -->
      <section class="preview-panel panel">
        <h2>预览</h2>
        <div class="preview-controls">
          <div class="bg-color-controls">
            <button class="bg-color-button active" data-color="#ffffff" title="白色背景">
              <span class="color-swatch white"></span>
            </button>
            <button class="bg-color-button" data-color="#000000" title="黑色背景">
              <span class="color-swatch black"></span>
            </button>
            <button class="bg-color-button" data-color="#f0f0f0" title="灰色背景">
              <span class="color-swatch gray"></span>
            </button>
            <button class="bg-color-button" data-color="transparent" title="透明背景">
              <span class="color-swatch transparent"></span>
            </button>
          </div>
          <button id="apply-watermark-btn" class="button primary">应用水印</button>
        </div>
        
        <div id="preview-container" class="preview-container">
          <div id="no-image-message" class="no-image-message">
            <i class="icon icon-image"></i>
            <p>请上传图片以预览</p>
          </div>
          <img id="preview-image" class="preview-image" alt="预览图片">
          <canvas id="preview-canvas" class="preview-canvas"></canvas>
          <div id="watermark-container" class="watermark-container"></div>
          <span id="gif-badge" class="gif-badge">GIF</span>
        </div>
        
        <!-- GIF处理进度 -->
        <div id="gif-progress-container" class="progress-container">
          <div class="progress-label">GIF处理中...</div>
          <div class="progress-bar-container">
            <div id="gif-progress-bar" class="progress-bar"></div>
          </div>
        </div>
      </section>
      
      <!-- 右侧面板 - 水印设置 -->
      <section class="watermark-panel panel">
        <h2>水印设置</h2>
        
        <div class="option-group">
          <label for="watermark-type">水印类型</label>
          <select id="watermark-type" class="select-input">
            <option value="text">文本水印</option>
            <option value="image">图片水印</option>
            <option value="tile">平铺水印</option>
          </select>
        </div>
        
        <!-- 文本水印选项 -->
        <div id="text-options" class="option-section">
          <div class="option-group">
            <label for="watermark-text">水印文本</label>
            <input type="text" id="watermark-text" class="text-input" value="仅供验证使用">
          </div>
          
          <div class="option-group">
            <label for="font-family">字体</label>
            <select id="font-family" class="select-input">
              <option value="Arial">Arial</option>
              <option value="Times New Roman">Times New Roman</option>
              <option value="Courier New">Courier New</option>
              <option value="SimSun">宋体</option>
              <option value="SimHei">黑体</option>
              <option value="Microsoft YaHei">微软雅黑</option>
            </select>
          </div>
          
          <div class="option-group">
            <label for="color">颜色</label>
            <input type="color" id="color" value="#0000ff">
          </div>
        </div>
        
        <!-- 图片水印选项 -->
        <div id="image-options" class="option-section" style="display: none;">
          <div class="option-group">
            <label>水印图片</label>
            <div id="watermark-image-area" class="watermark-image-area">
              <div id="watermark-image-preview" class="watermark-image-preview" style="display: none;">
                <img id="watermark-image-thumbnail" class="watermark-image-thumbnail" alt="水印图片">
                <button id="remove-watermark-image" class="icon-button remove-button">
                  <i class="icon icon-remove"></i>
                </button>
              </div>
              <div class="watermark-image-placeholder">
                <i class="icon icon-image"></i>
                <p>点击选择水印图片</p>
              </div>
            </div>
            <input type="file" id="watermark-image-input" accept="image/*" style="display: none;">
          </div>
          
          <div class="option-group">
            <label for="watermark-image-size">图片大小</label>
            <div class="slider-container">
              <input type="range" id="watermark-image-size" min="10" max="100" value="50" class="slider">
              <span id="watermark-image-size-value">50%</span>
            </div>
          </div>
        </div>
        
        <!-- 共用选项 -->
        <div class="option-group">
          <label for="opacity">透明度</label>
          <div class="slider-container">
            <input type="range" id="opacity" min="1" max="100" value="30" class="slider">
            <span id="opacity-value">30%</span>
          </div>
          <div class="number-input-container">
            <button id="opacity-decrease" class="number-button">-</button>
            <input type="number" id="opacity-input" min="1" max="100" value="30" class="number-input">
            <button id="opacity-increase" class="number-button">+</button>
          </div>
        </div>
        
        <div class="option-group">
          <label for="rotation">旋转角度</label>
          <div class="slider-container">
            <input type="range" id="rotation" min="0" max="360" value="30" class="slider">
            <span id="rotation-value">30°</span>
          </div>
          <div class="number-input-container">
            <button id="rotation-decrease" class="number-button">-</button>
            <input type="number" id="rotation-input" min="0" max="360" value="30" class="number-input">
            <button id="rotation-increase" class="number-button">+</button>
          </div>
        </div>
        
        <div class="option-group">
          <label for="font-size">大小</label>
          <div class="slider-container">
            <input type="range" id="font-size" min="1" max="100" value="20" class="slider">
            <span id="font-size-value">20</span>
          </div>
          <div class="number-input-container">
            <button id="size-decrease" class="number-button">-</button>
            <input type="number" id="font-size-input" min="1" max="100" value="20" class="number-input">
            <button id="size-increase" class="number-button">+</button>
          </div>
        </div>
        
        <div class="option-group">
          <label>位置</label>
          <div class="position-grid">
            <label class="position-option">
              <input type="radio" name="position" value="topLeft">
              <span class="position-icon top-left"></span>
              <span>左上</span>
            </label>
            <label class="position-option">
              <input type="radio" name="position" value="topRight">
              <span class="position-icon top-right"></span>
              <span>右上</span>
            </label>
            <label class="position-option">
              <input type="radio" name="position" value="center" checked>
              <span class="position-icon center"></span>
              <span>中心</span>
            </label>
            <label class="position-option">
              <input type="radio" name="position" value="bottomLeft">
              <span class="position-icon bottom-left"></span>
              <span>左下</span>
            </label>
            <label class="position-option">
              <input type="radio" name="position" value="bottomRight">
              <span class="position-icon bottom-right"></span>
              <span>右下</span>
            </label>
            <label class="position-option">
              <input type="radio" name="position" value="custom">
              <span class="position-icon custom"></span>
              <span>自定义</span>
            </label>
            <label class="position-option">
              <input type="radio" name="position" value="tile">
              <span class="position-icon tile"></span>
              <span>平铺</span>
            </label>
          </div>
        </div>
        
        <!-- 边距控制 -->
        <div id="margin-controls" class="option-section">
          <div class="option-group">
            <label for="margin-x-slider">水平边距</label>
            <div class="slider-container">
              <input type="range" id="margin-x-slider" min="0" max="100" value="10" class="slider">
              <input type="number" id="margin-x-value" min="0" max="100" value="10" class="number-input">
            </div>
          </div>
          
          <div class="option-group">
            <label for="margin-y-slider">垂直边距</label>
            <div class="slider-container">
              <input type="range" id="margin-y-slider" min="0" max="100" value="10" class="slider">
              <input type="number" id="margin-y-value" min="0" max="100" value="10" class="number-input">
            </div>
          </div>
        </div>
        
        <!-- 平铺控制 -->
        <div id="tile-controls" class="option-section" style="display: none;">
          <div class="option-group">
            <label for="tile-spacing-slider">平铺间距</label>
            <div class="slider-container">
              <input type="range" id="tile-spacing-slider" min="0" max="100" value="10" class="slider">
              <input type="number" id="tile-spacing-value" min="0" max="100" value="10" class="number-input">
            </div>
          </div>
        </div>
        
        <!-- 缩放控制 -->
        <div class="option-group">
          <label>缩放模式</label>
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="scale-mode" value="fixed" checked>
              <span>固定大小</span>
            </label>
            <label class="radio-option">
              <input type="radio" name="scale-mode" value="relative">
              <span>相对大小</span>
            </label>
          </div>
        </div>
        
        <!-- 相对缩放控制 -->
        <div id="relative-scale-controls" class="option-section" style="display: none;">
          <div class="option-group">
            <label for="scale-ratio-slider">缩放比例</label>
            <div class="slider-container">
              <input type="range" id="scale-ratio-slider" min="1" max="100" value="10" class="slider">
              <input type="number" id="scale-ratio-value" min="1" max="100" value="10" class="number-input">
            </div>
          </div>
        </div>
        
        <!-- 导出设置 -->
        <div class="option-group">
          <label for="image-quality">导出质量</label>
          <div class="slider-container">
            <input type="range" id="image-quality" min="10" max="100" value="90" class="slider">
            <span id="image-quality-value">90%</span>
          </div>
        </div>
        
        <!-- 导出按钮 -->
        <div class="button-group">
          <button id="export-current-btn" class="button primary">导出当前图片</button>
          <button id="batch-export-btn" class="button secondary">批量导出</button>
        </div>
      </section>
    </main>
    
    <!-- 状态消息 -->
    <div id="status-message" class="status-message"></div>
    
    <!-- 处理中模态框 -->
    <div id="processing-modal" class="modal">
      <div class="modal-content">
        <div class="spinner"></div>
        <p>处理中，请稍候...</p>
      </div>
    </div>
  </div>
</body>
</html> 